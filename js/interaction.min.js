function onLoad(){menuHeight=$(".header").outerHeight(true)+$(".footer").outerHeight(true)+20;resizeGallery();centerGallery();$(window).resize(function(){menuHeight=$(".header").outerHeight(true)+$(".footer").outerHeight(true)+20;resizeGallery();centerGallery()})}function onReady(){$("a").each(function(){$(this).mouseenter(function(){$(this).animate({backgroundColor:colorPrimary,color:colorSecondary},200)});$(this).mouseout(function(){$(this).animate({backgroundColor:colorSecondary,color:colorPrimary},200)})});$(".header a").each(function(){$(this).bind("click",function(e){changeState($(this).attr("id"))})});$(".header a#"+state).addClass("current");$(".content").bind("mousewheel",function(e,t,n,r){if(!galleryReady)return false;if((r<0||n>0)&&t<0){nextPhoto()}else if((r>0||n<0)&&t>0){prevPhoto()}return false});$(".content").bind("click",function(e){if(!galleryReady)return;if(e.pageX>$(this).width()/2){nextPhoto()}else{prevPhoto()}});$("h1").mouseover(function(){var e=0;var t=20;$("h1 span").each(function(){var n=this;setTimeout(function(){$(n).css({"background-color":colorPrimary,color:colorSecondary})},e);setTimeout(function(){$(n).css({"background-color":colorSecondary,color:colorPrimary})},t+e);e+=t});$($("h1 span").get().reverse()).each(function(){var n=this;setTimeout(function(){$(n).css({"background-color":colorPrimary,color:colorSecondary})},e);setTimeout(function(){$(n).css({"background-color":colorSecondary,color:colorPrimary})},t+e);e+=t})});$(".content").touchwipe({wipeLeft:function(){nextPhoto()},wipeRight:function(){prevPhoto()},wipeUp:function(){nextPhoto()},wipeDown:function(){prevPhoto()},min_move_x:20,min_move_y:20,preventDefaultEvents:true})}function resizeGallery(){photoHeight=100;var e=photoHeight+30;if($(window).height()-menuHeight>100){photoHeight=$(window).height()-menuHeight-30;e=photoHeight+30}if($(window).height()-menuHeight-30>1e3){photoHeight=1e3;e=photoHeight+30}$(".content").css("height",e);$(".photo img").css("height",photoHeight);$(".photo").css("height",photoHeight);$(".image").css("height",photoHeight+30)}function prevPhoto(){var e=current;if(current<=0||lock)return;var t=$(".img"+e);var n=$(".img"+(e-1));var r=$(".img"+(e-2));var i=$(".img"+(e+1));var s=parseFloat(t.css("left"))+(t.width()/2+n.width()/2)+10;if(r.length){r.animate({opacity:transluscent,left:s},slideSpeed)}n.animate({opacity:1,left:s},slideSpeed);t.animate({opacity:transluscent,left:s},slideSpeed);i.animate({opacity:0,left:s},slideSpeed);lock=true;setTimeout(function(){lock=false},slideSpeed);current--}function nextPhoto(){var e=current;if(!$(".img"+(e+1)).length||lock)return;console.log(lock);var t=$(".img"+e);var n=$(".img"+(e-1));var r=$(".img"+(e+1));var i=$(".img"+(e+2));var s=parseFloat(t.css("left"))-(t.width()/2+r.width()/2)-10;if(n.length){n.animate({opacity:0,left:s},slideSpeed)}if(i.length){i.animate({opacity:transluscent,left:s},slideSpeed)}t.animate({opacity:transluscent,left:s},slideSpeed);r.animate({opacity:1,left:s},slideSpeed);lock=true;setTimeout(function(){lock=false},slideSpeed);if(!$(".img"+(current+3)).length){$.post("includes/photo.php",{action:"add",current:current,dir:state},function(e){$(".content").append(e);$(".img"+(current+3)).css("opacity",0);$(".img"+(current+3)).css("left",s);$(".img"+(current+3)).css("height",photoHeight+30);$(".img"+(current+3)+" .photo").css("height",photoHeight);$(".img"+(current+3)+" img").css("height",photoHeight);current++})}else{current++}}function changeState(e){if(state==e||lock)return;lock=true;current=0;var t="#wrapper_"+state;var n="#wrapper_"+e;toggleColors();$(t).animate({top:-1*$(window).height()},1e3);$.get("view/"+e+".php",function(r){state=e;$("body").append(r);$(".header a#"+state).addClass("current");setColors(n);$.post("includes/photo.php",{action:"width",dir:"live",index:0},function(e){onLoad();var t=e.split(" ");ratio=t[0]/t[1];tempOffset=$(window).width()/2-ratio*photoHeight/2-10;$(n+" .img0").css("left",tempOffset);$(n+" .img1").css("left",tempOffset)});$(n).animate({top:-1*$(window).height()},1e3,function(){$(t).remove();$(n).css("top",0);onLoad();onReady();lock=false})})}function centerGallery(e){if(typeof e==="undefined"){e=state}e="#wrapper_"+e+" ";var t=$(e+".img"+(current-2));var n=$(e+".img"+(current-1));var r=$(e+".img"+current);var i=$(e+".img"+(current+1));var s=$(e+".img"+(current+2));$.post("includes/photo.php",{action:"width",dir:"live",index:current},function(e){var o=e.split(" ");var u=o[0]/o[1];var a=$(window).width()/2-u*photoHeight/2-10;for(var f=2;f<=o.length-2;f+=2){var l=u;u=o[f]/o[f+1];a-=u*photoHeight/2+l*photoHeight/2+10}t.css("left",a);t.css("opacity",0);n.css("left",a);n.css("opacity",transluscent);r.css("left",a);i.css("left",a);i.css("opacity",transluscent);s.css("left",a);s.css("opacity",0);galleryReady=true;return})}function toggleColors(){if(colorPrimary=="#000000"){colorPrimary="#FFFFFF";colorSecondary="#000000"}else{colorPrimary="#000000";colorSecondary="#FFFFFF"}}function setColors(e){$(e).css({background:colorSecondary,color:colorPrimary});$(e+" a").css("color",colorPrimary);$(e+" .header").css({background:colorSecondary,color:colorPrimary});$(e+" .header a").css({color:colorPrimary,border:"1px solid "+colorSecondary});$(e+" .header a.current").css("border","1px solid "+colorPrimary);$(e+" .content").css({background:colorPrimary,color:colorSecondary})}var current=0;var lock=false;var galleryReady=false;var transluscent=.35;var slideSpeed=500;var photoHeight=500;var menuHeight=160;var colorPrimary="#000000";var colorSecondary="#FFFFFF";$(window).load(onLoad);$(document).ready(onReady)